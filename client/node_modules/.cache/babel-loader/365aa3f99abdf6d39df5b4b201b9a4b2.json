{"ast":null,"code":"var _jsxFileName = \"/home/cem/projects/streets/client/src/components/loginpage/LoginPage.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useRef } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { axi } from \"../../utils/config\";\nimport Header from \"../../common/Header\";\nimport styles from \"./login.module.css\";\nimport { setLogin, setUser } from \"./loginAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginPage(props) {\n  _s();\n\n  const passRef = useRef(\"\");\n  const emailRef = useRef(\"\"); //eslint-disable-next-line\n\n  const [state, setState] = useState({});\n\n  const submit = e => {\n    e.preventDefault();\n    axi(\"post\", \"/user/login\", {\n      password: passRef.current.value,\n      email: emailRef.current.value\n    }).then(res => {\n      if (res.status === \"accepted\") {\n        setState(res);\n        props.setUser(res.response.payload.email);\n        props.setLogin(true);\n        localStorage.removeItem(\"token\");\n        localStorage.setItem(\"token\", res.response.token);\n        console.log(res.response.token);\n      }\n    }).catch(console.log);\n  };\n\n  if (props.isLogin) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 28\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.bottomHeader\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.formContainer,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: styles.form,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.logo,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Log In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.inputContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.inputGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email\",\n              children: \"email: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              id: \"email\",\n              ref: emailRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.inputGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              children: \"password: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              id: \"password\",\n              ref: passRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: styles.btn,\n            onClick: submit,\n            children: \"submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 3\n  }, this);\n}\n\n_s(LoginPage, \"lGayj3/h7QbFFiphnUyJocTS92E=\");\n\n_c = LoginPage;\n\nconst mapStateToProps = state => {\n  return {\n    isLogin: state.isLogin\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setLogin,\n  setUser\n})(LoginPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"sources":["/home/cem/projects/streets/client/src/components/loginpage/LoginPage.js"],"names":["useState","useRef","Redirect","connect","axi","Header","styles","setLogin","setUser","LoginPage","props","passRef","emailRef","state","setState","submit","e","preventDefault","password","current","value","email","then","res","status","response","payload","localStorage","removeItem","setItem","token","console","log","catch","isLogin","container","bottomHeader","formContainer","form","logo","inputContainer","inputGroup","btn","mapStateToProps"],"mappings":"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","sourcesContent":["import { useState, useRef } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { axi } from \"../../utils/config\";\nimport Header from \"../../common/Header\";\nimport styles from \"./login.module.css\";\nimport { setLogin, setUser } from \"./loginAction\";\n\nfunction LoginPage(props) {\n\tconst passRef = useRef(\"\");\n\tconst emailRef = useRef(\"\");\n\t//eslint-disable-next-line\n\tconst [state, setState] = useState({});\n\n\tconst submit = (e) => {\n\t\te.preventDefault();\n\t\taxi(\"post\", \"/user/login\", {\n\t\t\tpassword: passRef.current.value,\n\t\t\temail: emailRef.current.value,\n\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tif (res.status === \"accepted\") {\n\t\t\t\t\tsetState(res);\n\t\t\t\t\tprops.setUser(res.response.payload.email);\n\t\t\t\t\tprops.setLogin(true);\n\t\t\t\t\tlocalStorage.removeItem(\"token\");\n\t\t\t\t\tlocalStorage.setItem(\"token\", res.response.token);\n\t\t\t\t\tconsole.log(res.response.token);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(console.log);\n\t};\n\n\tif (props.isLogin) return <Redirect to=\"/\" />;\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Header />\n\t\t\t<div className={styles.bottomHeader}></div>\n\t\t\t<div className={styles.formContainer}>\n\t\t\t\t<form className={styles.form}>\n\t\t\t\t\t<div className={styles.logo}>\n\t\t\t\t\t\t<h1>Log In</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.inputContainer}>\n\t\t\t\t\t\t<div className={styles.inputGroup}>\n\t\t\t\t\t\t\t<label htmlFor=\"email\">email: </label>\n\t\t\t\t\t\t\t<input type=\"email\" id=\"email\" ref={emailRef} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.inputGroup}>\n\t\t\t\t\t\t\t<label htmlFor=\"password\">password: </label>\n\t\t\t\t\t\t\t<input type=\"password\" id=\"password\" ref={passRef} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type=\"submit\" className={styles.btn} onClick={submit}>\n\t\t\t\t\t\t\tsubmit\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tisLogin: state.isLogin,\n\t};\n};\n\nexport default connect(mapStateToProps, { setLogin, setUser })(LoginPage);\n"]},"metadata":{},"sourceType":"module"}