{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\n\nfunction useLocationStates() {\n  _s();\n\n  const [initLocation, setInitLocation] = useState({\n    lat: 0,\n    lng: 0\n  });\n  const [locationState, setLocationState] = useState({\n    lat: 0,\n    lng: 0\n  });\n  const id = useRef(0);\n  useEffect(() => {\n    if (navigator.userAgent.toLowerCase().includes(\"android\") && navigator.userAgent.toLowerCase().includes(\"firefox\")) alert(\"firefox mobile browser has a geolocation service issue, please use other browsers to avoid location issues\");\n  }, []);\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(l => {\n      setInitLocation({\n        lat: l.coords.latitude,\n        lng: l.coords.longitude\n      });\n      setLocationState({\n        lat: l.coords.latitude,\n        lng: l.coords.longitude\n      });\n    }, err => console.log(\"getCurrentPosition error occour \", err), {\n      timeout: 15000\n    });\n    id.current = navigator.geolocation.watchPosition(l => {\n      setLocationState({\n        lat: l.coords.latitude,\n        lng: l.coords.longitude\n      });\n    }, err => console.log(\"watchPosition error occour \", err), {\n      timeout: 15000\n    });\n    return () => {\n      navigator.geolocation.clearWatch(id.current);\n    };\n  }, //eslint-disable-next-line\n  []);\n  return [initLocation, locationState];\n}\n\n_s(useLocationStates, \"yzF5YmlecR0d1YgUD9Clgckiqrk=\");\n\nexport default useLocationStates;","map":{"version":3,"sources":["/home/cem/projects/streets/client/src/components/homepage/useLocationStates.js"],"names":["useState","useEffect","useRef","useLocationStates","initLocation","setInitLocation","lat","lng","locationState","setLocationState","id","navigator","userAgent","toLowerCase","includes","alert","geolocation","getCurrentPosition","l","coords","latitude","longitude","err","console","log","timeout","current","watchPosition","clearWatch"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;;AAEA,SAASC,iBAAT,GAA6B;AAAA;;AAC5B,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCL,QAAQ,CAAC;AAAEM,IAAAA,GAAG,EAAE,CAAP;AAAUC,IAAAA,GAAG,EAAE;AAAf,GAAD,CAAhD;AACA,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCT,QAAQ,CAAC;AAAEM,IAAAA,GAAG,EAAE,CAAP;AAAUC,IAAAA,GAAG,EAAE;AAAf,GAAD,CAAlD;AACA,QAAMG,EAAE,GAAGR,MAAM,CAAC,CAAD,CAAjB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACf,QACCU,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,QAAlC,CAA2C,SAA3C,KACAH,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,QAAlC,CAA2C,SAA3C,CAFD,EAICC,KAAK,CACJ,4GADI,CAAL;AAGD,GARQ,EAQN,EARM,CAAT;AAUAd,EAAAA,SAAS,CACR,MAAM;AACLU,IAAAA,SAAS,CAACK,WAAV,CAAsBC,kBAAtB,CACEC,CAAD,IAAO;AACNb,MAAAA,eAAe,CAAC;AAAEC,QAAAA,GAAG,EAAEY,CAAC,CAACC,MAAF,CAASC,QAAhB;AAA0Bb,QAAAA,GAAG,EAAEW,CAAC,CAACC,MAAF,CAASE;AAAxC,OAAD,CAAf;AACAZ,MAAAA,gBAAgB,CAAC;AAAEH,QAAAA,GAAG,EAAEY,CAAC,CAACC,MAAF,CAASC,QAAhB;AAA0Bb,QAAAA,GAAG,EAAEW,CAAC,CAACC,MAAF,CAASE;AAAxC,OAAD,CAAhB;AACA,KAJF,EAKEC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,kCAAZ,EAAgDF,GAAhD,CALV,EAMC;AAAEG,MAAAA,OAAO,EAAE;AAAX,KAND;AAQAf,IAAAA,EAAE,CAACgB,OAAH,GAAaf,SAAS,CAACK,WAAV,CAAsBW,aAAtB,CACXT,CAAD,IAAO;AACNT,MAAAA,gBAAgB,CAAC;AAChBH,QAAAA,GAAG,EAAEY,CAAC,CAACC,MAAF,CAASC,QADE;AAEhBb,QAAAA,GAAG,EAAEW,CAAC,CAACC,MAAF,CAASE;AAFE,OAAD,CAAhB;AAIA,KANW,EAOXC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CF,GAA3C,CAPG,EAQZ;AAAEG,MAAAA,OAAO,EAAE;AAAX,KARY,CAAb;AAUA,WAAO,MAAM;AACZd,MAAAA,SAAS,CAACK,WAAV,CAAsBY,UAAtB,CAAiClB,EAAE,CAACgB,OAApC;AACA,KAFD;AAGA,GAvBO,EAwBR;AACA,IAzBQ,CAAT;AA2BA,SAAO,CAACtB,YAAD,EAAeI,aAAf,CAAP;AACA;;GA3CQL,iB;;AA6CT,eAAeA,iBAAf","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\n\nfunction useLocationStates() {\n\tconst [initLocation, setInitLocation] = useState({ lat: 0, lng: 0 });\n\tconst [locationState, setLocationState] = useState({ lat: 0, lng: 0 });\n\tconst id = useRef(0);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tnavigator.userAgent.toLowerCase().includes(\"android\") &&\n\t\t\tnavigator.userAgent.toLowerCase().includes(\"firefox\")\n\t\t)\n\t\t\talert(\n\t\t\t\t\"firefox mobile browser has a geolocation service issue, please use other browsers to avoid location issues\"\n\t\t\t);\n\t}, []);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t(l) => {\n\t\t\t\t\tsetInitLocation({ lat: l.coords.latitude, lng: l.coords.longitude });\n\t\t\t\t\tsetLocationState({ lat: l.coords.latitude, lng: l.coords.longitude });\n\t\t\t\t},\n\t\t\t\t(err) => console.log(\"getCurrentPosition error occour \", err),\n\t\t\t\t{ timeout: 15000 }\n\t\t\t);\n\t\t\tid.current = navigator.geolocation.watchPosition(\n\t\t\t\t(l) => {\n\t\t\t\t\tsetLocationState({\n\t\t\t\t\t\tlat: l.coords.latitude,\n\t\t\t\t\t\tlng: l.coords.longitude,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t(err) => console.log(\"watchPosition error occour \", err),\n\t\t\t\t{ timeout: 15000 }\n\t\t\t);\n\t\t\treturn () => {\n\t\t\t\tnavigator.geolocation.clearWatch(id.current);\n\t\t\t};\n\t\t},\n\t\t//eslint-disable-next-line\n\t\t[]\n\t);\n\treturn [initLocation, locationState];\n}\n\nexport default useLocationStates;\n"]},"metadata":{},"sourceType":"module"}